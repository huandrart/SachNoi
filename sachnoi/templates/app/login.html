{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form ƒêƒÉng Nh·∫≠p</title>
    
    <link rel="stylesheet" href="{% static 'assets/css/reset.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/styles_login.css' %}" />

    <style>
        .alert-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            max-width: 400px;
            width: 100%;
            text-align: center;
            display: none;
        }
        .alert {
            padding: 15px;
            border-radius: 5px;
            color: black;
            font-size: 16px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .alert-success { background-color: #28a745; }
        .alert-error { background-color: #dc3545; }
        .alert-warning { background-color: #ffc107; }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <ul>
                <li class="title-page"><a href="{% url 'index' %}">Trang ch·ªß</a></li>
                <li ><a href="{% url 'trending_page' %}">Th·ªãnh h√†nh</a></li>

                <li><a href="{% url 'discover' %}">Kh√°m ph√°</a></li>
                <li><a href="{% url 'author' %}">T√°c gi·∫£</a></li>
                <li><a href="{% url 'category' %}">Th·ªÉ lo·∫°i</a></li>
            </ul>
        </div>
    </header>

    <div class="container">
        <div class="box">
            <form id="loginForm" action="" method="POST">
                {% csrf_token %}
                <h1 class="title">ƒêƒÉng nh·∫≠p</h1>
                <input type="text" name="username" id="name-user" placeholder="T√™n ƒëƒÉng nh·∫≠p" autocomplete="off">
                <input type="password" name="password" id="password" placeholder="M·∫≠t kh·∫©u" autocomplete="off">
                <a href="{% url 'forgot_password' %}" class="forgot-password">Qu√™n m·∫≠t kh·∫©u?</a>
                <input type="submit" value="ƒêƒÉng nh·∫≠p" class="login-box">
                <div>
                    <h3>B·∫°n ch∆∞a ƒëƒÉng k√Ω?</h3>
                    <a href="{% url 'signup' %}" class="register">ƒêƒÉng k√Ω</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Th√¥ng b√°o hi·ªÉn th·ªã -->
    <div id="message-container" class="alert-container">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let messageContainer = document.getElementById("message-container");
            let alerts = messageContainer.getElementsByClassName("alert");
    
            if (alerts.length > 0) {
                messageContainer.style.display = "block";
    
                setTimeout(() => {
                    for (let alert of alerts) {
                        alert.style.opacity = "1";
                    }
                }, 100);
    
                // Ch·ªù 3 gi√¢y tr∆∞·ªõc khi chuy·ªÉn trang
                setTimeout(() => {
                    for (let alert of alerts) {
                        alert.style.opacity = "0";
                    }
                    setTimeout(() => messageContainer.style.display = "none", 500);
                }, 3000);
            }
        });
    
        // Ki·ªÉm tra form tr∆∞·ªõc khi g·ª≠i
        document.getElementById("loginForm").addEventListener("submit", function(event) {
            event.preventDefault(); // ‚õî NgƒÉn g·ª≠i form ngay l·∫≠p t·ª©c
    
            let username = document.getElementById("name-user").value.trim();
            let password = document.getElementById("password").value.trim();
    
            if (username === "" || password === "") {
                showAlert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!", "warning");
                return;
            }
    
            showAlert("üéâ ƒêƒÉng nh·∫≠p th√†nh c√¥ng! Chuy·ªÉn h∆∞·ªõng...", "success");
    
            // ‚è≥ Ch·ªù 3 gi√¢y r·ªìi m·ªõi g·ª≠i form
            setTimeout(() => {
                this.submit();
            }, 3000);
        });
    
        function showAlert(message, type) {
            let messageContainer = document.getElementById("message-container");
            messageContainer.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            messageContainer.style.display = "block";
    
            setTimeout(() => {
                let alert = messageContainer.querySelector(".alert");
                alert.style.opacity = "1";
            }, 100);
    
            setTimeout(() => {
                let alert = messageContainer.querySelector(".alert");
                alert.style.opacity = "0";
                setTimeout(() => messageContainer.style.display = "none", 500);
            }, 3000);
        }
    </script>
    

    
</body>
</html>
